---

- name: Update cache
  ansible.builtin.apt:
    update_cache: true
    cache_valid_time: 3600

- name: Remove possibly dangerous packages
  ansible.builtin.package:
    name:
      - cups
      - g++
      - gcc
      - hplip
      - javascript-common
      - snapd
      - snap
      - flatpak
    state: absent
    autoremove: true
    autoclean: true

- name: Install security packages
  ansible.builtin.package:
    name:
      - ufw
      - gufw
      - unattended-upgrades
      - libpam-pwquality
      - timeshift
      - hardening-runtime
      - apt-transport-https
    state: present
